# 食べ物モード 共通ルール

このファイルは、食べ物モードの全セクションで共通して適用されるルールを定義します。

## キャラクター設定

### zundamon（ずんだもん）- 主人公・体験者

- **役割**: 食べ物を食べ過ぎる当事者
- **語尾**: 「〜のだ」「〜なのだ」
- **性格**:
  - 極度に楽観的で現実逃避が得意
  - 言い訳のプロ
  - プライドが高いが実際はポンコツ
  - 現代っ子らしい表現を使うが、的外れな発言も多い
  - 困った時ほど強がって墓穴を掘るタイプ

**性格バリエーション**（セクションに応じて強調）:

- **強がり型**: 「全然平気なのだ！」
- **言い訳マスター型**: 「ちょっと疲れてるだけなのだ...」
- **データ信者型**: 「ネットで調べたら大丈夫って書いてあったのだ」
- **楽天家型**: 「なんとかなるのだ！」
- **流行追従型**: 「みんなやってるのだ！」
- **完璧主義型**: 「完璧にやらないと気が済まないのだ」
- **専門家気取り型**: 「詳しいのだ！」

### metan（四国めたん）- ツッコミ役・心配する友人

- **役割**: 現実的なツッコミ、心配、指摘
- **性格**: ツンデレ気味、プライドが高い、本当は優しい
- **口調の使い分け**（重要）:
  - **ずんだもんと話す時**: タメ口
    - 「〜だよ」「〜だね」「〜じゃん」
    - 「別に心配してないけど」「仕方ないなぁ」
  - **ナレーターやつむぎと話す時**: 敬語
    - 「〜ですよ」「〜ですね」「〜ます」
- **特徴**:
  - 結構きつめのツッコミをする
  - 最初は軽く注意、徐々に本気で心配
  - ずんだもんの的外れな言動には容赦なく鋭い指摘
  - 素直になれない部分もあるが、根は優しい

### tsumugi（春日部つむぎ）- 素朴な友人・視聴者代表

- **役割**: 純粋な疑問、視聴者が思うことを代弁
- **語尾**: 「〜です」「〜ますか？」「〜ですね」
- **性格**: 素直、優しい、少し天然
- **特徴**:
  - 純粋な疑問で核心を突く
  - 難しいことをわかりやすく聞き返す
  - 視聴者目線の反応
  - 友人同士の心配や支援の気持ちが伝わる温かい会話

### narrator（ナレーター）- 客観的解説・医学的説明

- **役割**: 医学的事実、客観的情報の提供
- **口調**: **必ず「ですます調」で統一**
  - 「〜です」「〜ます」「〜でした」「〜ました」「〜でしょう」
  - ❌ 「〜である」「〜と言える」などの断定調は使用禁止
- **特徴**:
  - 客観的で権威的でありながら、親しみやすい
  - 冷静だが時々ドラマチック
  - 難しい内容を平易な言葉で説明

**例**:

- ✅ 「この食品には ○○ が含まれています」
- ✅ 「体内では ○○ が起こります」
- ✅ 「研究によると ○○ ということが分かっています」
- ❌ 「この食品には ○○ が含まれている」
- ❌ 「体内では ○○ が起こるのである」

## VOICEVOX 用テキスト生成ルール

### 必須フィールド

#### 1. text（字幕表示用）

- 通常の漢字・カタカナを含む読みやすい表記
- 25-30 文字以内を目標
- 例: 「家系ラーメンを食べ過ぎたのだ」

#### 2. text_for_voicevox（VOICEVOX 読み上げ用）

- text と同じ内容を**完全ひらがな**に変換
- 食べ物の名前、専門用語は正しい読み方で記述
- 例: 「いえけいらーめんをたべすぎたのだ」

#### 3. character_expressions（各キャラクターの表情指定）

- **【最重要】visible_characters に含まれる全てのキャラクターの表情を個別に指定**
- オブジェクト形式: `{"zundamon": "sick", "metan": "worried"}`
- **話している人だけでなく、聞いている人の表情も必ず指定**
- **表情名は必ず小文字で指定**（"Normal"ではなく"normal"）

### 読み上げテキストの注意点

- 食べ物名の読み方を正確に
  - 家系 → いえけい
  - 鯖 → さば
  - 焼売 → しゅうまい
- 特殊な読み
  - 「今日」→「きょう」
  - 「明日」→「あした」
- 数字は読み方を明記
  - 10 個 → じゅっこ
  - 3 日 → みっか
- 記号や句読点はそのまま含めて OK
- カタカナもひらがなに
  - ラーメン → らーめん

## 表情選択の指針

### 利用可能な表情

- `normal`: 通常
- `happy`: 嬉しい、楽しい
- `sad`: 悲しい、落ち込む
- `angry`: 怒り、イライラ
- `surprised`: 驚き
- `thinking`: 考え中、疑問
- `worried`: 心配、不安
- `excited`: 興奮、テンション高い
- `sick`: 体調不良、具合が悪い

### 表情の選び方

**話者の表情**:

- セリフの内容や感情に合った表情を選択

**聞き手の表情**:

- 心配な話を聞く → `worried`, `sad`
- 驚くような話を聞く → `surprised`
- 呆れた反応 → `thinking`, `normal`
- 共感している → `happy`, `normal`
- 怒っている → `angry`

### 表情設定例

```json
{
  "speaker": "zundamon",
  "text": "全然平気なのだ！",
  "visible_characters": ["zundamon", "metan"],
  "character_expressions": {
    "zundamon": "happy",
    "metan": "worried"
  }
}
```

## 文字数とセリフ構成ルール

### 基本文字数

- 各セリフの text は**25-30 文字以内を目標**
- 自然な流れ優先: 会話の自然さを最優先に構成
- キャラクター性重視: ずんだもんの自然で親しみやすい表現を活用

### セリフの構成

- **連続セリフ活用**: 心理変化や説明で一人が 2-3 セリフ続けることを積極活用
- **自然な会話流**: 友人同士の心配や支援の気持ちが伝わる温かい会話
- **テンポ重視**: 間延びしない、適度なテンポ感

## 利用可能な要素

### 話者名

- `zundamon`: ずんだもん
- `metan`: 四国めたん
- `tsumugi`: 春日部つむぎ
- `narrator`: ナレーター

### 表情（再掲）

- `normal`, `happy`, `sad`, `angry`, `surprised`, `thinking`, `worried`, `excited`, `sick`

### 背景

シーンの内容や状況に最も適した具体的な背景を英語で動的に選択してください。

- **必ず 3 つの英単語をアンダースコアで区切った形式**
- 形式: `{場所}_{詳細}_{時間帯または状態}`
- 会話の内容、登場人物の状況、時間帯、場所などを考慮
- 食べ物関連の場合は、その食べ物を食べる場所や関連する場所を選択
- シーンが変わるごとに適切な背景を変更し、視覚的なバリエーションを持たせる

**背景例**:

- `modern_living_room_day`: 現代的なリビング（昼）
- `cozy_bedroom_night`: 居心地の良い寝室（夜）
- `bright_kitchen_morning`: 明るいキッチン（朝）
- `hospital_waiting_room_day`: 病院の待合室（昼）
- `quiet_library_afternoon`: 静かな図書館（午後）
- `busy_restaurant_evening`: 賑やかなレストラン（夕方）

## 重要な注意事項

### 1. ナレーターの扱い

- **ナレーターは画面に表示されません**
- `visible_characters`に"narrator"を含めないでください
- ナレーターのセリフの場合、`visible_characters`には他のキャラクター（zundamon, metan, tsumugi）のみを指定

### 2. キャラクターの組み合わせ

- 各セクションではキャラクターを**2 人 1 組**で使用
- `visible_characters`に表示する 2 人のキャラクターを指定
- シーンに最も適した組み合わせを選択

### 3. 背景の選択

- シーンに最も適した背景を英語で選択
- 3 単語アンダースコア区切り形式を厳守

### 4. 一日 3 食の設定

- ずんだもんは**一日 3 食（朝・昼・夜）すべて**を対象の食べ物で済ませています
- 食べ物の特性によっては「毎食後に必ず」「一日に複数回」など適切な頻度に調整可能
- この極端な食生活を、適切なセクションで自然に言及してください

## アイテム画像の表示ルール

一部のセクション（食品解説、真相解明など）では、ナレーターの解説を視覚的に補助するアイテム画像を表示します。

### 表示方法

- 最初のセリフで必ずアイテムを指定
- 3-7 セリフごとに画像を変更（`display_item`にアイテム ID を指定）
- それ以外のセリフでは`display_item`を省略（または null）
- 指定された画像は次の画像が指定されるまで表示され続ける

### アイテム ID の命名ルール

- **3 つの英単語をアンダースコアで区切る形式**
  - 例: `white_salt_crystals`, `red_blood_cells`, `human_digestive_system`
- 実物の具体的なビジュアル（見た目・状態・色）を表現
- 抽象的な概念は矢印やシンボル、メタファー的な実物で表現
- 表、グラフ、人物の顔や身体部位は不可
- 小文字のみ使用

**良い例**:

- `white_salt_crystals`: 白い塩の結晶
- `fresh_green_vegetables`: 新鮮な緑の野菜
- `red_blood_cells`: 赤血球
- `human_digestive_system`: 人間の消化器系

**悪い例**:

- `Salt`: 単語が 1 つ（3 つ必要）
- `salt-crystals`: ハイフン使用（アンダースコア必須）
- `SaltCrystals`: 大文字使用（小文字のみ）
- `nutrition_chart`: 表・グラフ（不可）

## JSON 出力フォーマットルール

**【最重要】出力は必ず純粋な JSON フォーマットで記述してください**

- **コメントを含めないでください**: `//`や`/* */`などのコメントは一切使用禁止
- **有効な JSON 構文のみ**: JSON パーサーで解析可能な形式で出力
- **例（NG）**: `// --- 第1段階 ---`のようなコメントは含めない
- **例（OK）**: 説明が必要な場合は、JSON の値として記述する

## 医学的正確性と表現のバランス

### 医学的正確性

- 参考情報に基づいた内容
- 誇張しすぎない
- 科学的根拠のある説明

### エンターテイメント性

- 視聴者を飽きさせない工夫
- キャラクターの個性を活かす
- 適度なユーモア

### 教育的価値

- 視聴者が「気をつけよう」と思える
- 建設的な解決策を提示
- 過度な不安を煽らない

## セクション間の連携

### 前のセクションからの流れ

- 前のセクションの最後の状況を引き継ぐ
- 唐突な展開を避ける
- 時系列の一貫性を保つ

### 次のセクションへの橋渡し

- 次の展開を予感させる
- 自然な流れを作る
- 視聴者の興味を維持

## 品質チェックポイント

### セリフの質

- ✅ 25-30 文字以内
- ✅ キャラクターの口調が正しい
- ✅ 自然な会話になっている
- ✅ 情報が正確に伝わる

### 技術的な正確性

- ✅ text_for_voicevox が完全ひらがな
- ✅ character_expressions が全員分ある
- ✅ visible_characters が 2 人
- ✅ ナレーターが visible_characters に含まれていない

### ストーリーの質

- ✅ 前後のセクションとつながっている
- ✅ 医学的に正確
- ✅ 視聴者が理解しやすい
- ✅ エンターテイメント性がある
